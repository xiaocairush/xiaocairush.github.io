



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta http-equiv="x-dns-prefetch-control" content="on">
      <link rel="dns-prefetch" href="//oi-wiki.org">
      <link rel="dns-prefetch" href="//search.oi-wiki.org">
      <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
      <link rel="dns-prefetch" href="//api.github.com">
      <link rel="dns-prefetch" href="//cdn-for-oi-wiki.billchn.com">
      <link rel="dns-prefetch" href="//www.google-analytics.com">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://xiaocairush.github.io/java%E5%90%8E%E7%AB%AF/Redis-CheatSheet/">
      
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="jp">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../..">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-4.4.2">
    
    
      
        <title>Redis-CheatSheet</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../assets/javascripts/modernizr.27508f0e.js"></script>
    
    
      
        <style>@font-face{font-family:'Fira Sans';font-style:normal;font-weight:300;src:url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.eot);src:local('Fira Sans'),local('FiraSans-Normal'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.eot?#iefix) format('embedded-opentype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.woff2) format('woff2'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.woff) format('woff'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.ttf) format('truetype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.svg#FiraSans) format('svg')}@font-face{font-family:'Fira Sans';font-style:normal;font-weight:regular;src:url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.eot);src:local('Fira Sans'),local('FiraSans-Normal'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.eot?#iefix) format('embedded-opentype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.woff2) format('woff2'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.woff) format('woff'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.ttf) format('truetype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.svg#FiraSans) format('svg')}@font-face{font-family:'Fira Sans';font-style:italic;font-weight:regular;src:url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.eot);src:local('Fira Sans'),local('FiraSans-Italic'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.eot?#iefix) format('embedded-opentype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.woff2) format('woff2'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.woff) format('woff'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.ttf) format('truetype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.svg#FiraSans) format('svg')}@font-face{font-family:'Fira Sans';font-style:normal;font-weight:700;src:url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.eot);src:local('Fira Sans'),local('FiraSans-Normal'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.eot?#iefix) format('embedded-opentype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.woff2) format('woff2'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.woff) format('woff'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.ttf) format('truetype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.svg#FiraSans) format('svg')}@font-face{font-family:'Fira Mono';font-style:normal;font-weight:regular;src:url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.eot);src:local('Fira Mono'),local('FiraMono-Normal'),url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.eot?#iefix) format('embedded-opentype'),url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.woff2) format('woff2'),url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.woff) format('woff'),url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.ttf) format('truetype'),url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.svg#FiraMono) format('svg')}body,input{font-family:"Fira Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Fira Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/material-icons@0.2.3/iconfont/material-icons.min.css">
    
      <link rel="manifest" href="../../manifest.webmanifest">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#redis-cheatsheet" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://xiaocairush.github.io/" title="知识总结" class="md-header-nav__button md-logo">
          
            <i class="md-icon">school</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              知识总结
            </span>
            <span class="md-header-nav__topic">
              
                Redis-CheatSheet
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../ZooKeeper-overview/" class="md-tabs__link md-tabs__link--active">
          java后端
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://xiaocairush.github.io/" title="知识总结" class="md-nav__button md-logo">
      
        <i class="md-icon">school</i>
      
    </a>
    知识总结
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about.md" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      java后端
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        java后端
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ZooKeeper-overview/" title="ZooKeeper" class="md-nav__link">
      ZooKeeper
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Spark-Overview/" title="Spark" class="md-nav__link">
      Spark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Resources/" title="Resources" class="md-nav__link">
      Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../%E5%90%8C%E6%AD%A5%E5%B7%A5%E5%85%B7%E7%B1%BB/" title="同步工具类" class="md-nav__link">
      同步工具类
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../java-SE8-in-practice/" title="java-SE8-in-practice" class="md-nav__link">
      java-SE8-in-practice
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vim-learning-notes/" title="vim" class="md-nav__link">
      vim
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../understanding-REST/" title="理解REST" class="md-nav__link">
      理解REST
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spring-callstack/" title="spring" class="md-nav__link">
      spring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../BlockingQueue%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/" title="BlockingQueue源码剖析" class="md-nav__link">
      BlockingQueue源码剖析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ConcurrentHashMap%281.8%E7%89%88%E6%9C%AC%29%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/" title="ConcurrentHashMap" class="md-nav__link">
      ConcurrentHashMap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../java.util.concurrent.locks%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/" title="java.util.concurrent.locks源码剖析" class="md-nav__link">
      java.util.concurrent.locks源码剖析
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Redis
      </label>
    
    <a href="./" title="Redis" class="md-nav__link md-nav__link--active">
      Redis
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    简介
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    特点
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    使用场景
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    数据结构与编码
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    实用功能
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    慢查询分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitmaps" class="md-nav__link">
    Bitmaps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hyperloglog" class="md-nav__link">
    HyperLoglog
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    发布订阅
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ceo" class="md-nav__link">
    CEO
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    持久化
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rdb" class="md-nav__link">
    RDB
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    触发机制
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aof" class="md-nav__link">
    AOF
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#append" class="md-nav__link">
    命令写入(append)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sync" class="md-nav__link">
    文件同步(sync)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rewrite" class="md-nav__link">
    文件重写(rewrite)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load" class="md-nav__link">
    重启加载(load)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    复制
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    拓扑结构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    数据同步
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    心跳机制
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sentinel" class="md-nav__link">
    哨兵(Sentinel)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    基本概念
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    实现原理
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    三个定时任务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    主观下线与客观下线
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    哨兵主节点选举
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    集群
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    数据分布
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    数据分区理论
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    redis数据分区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    功能限制
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    搭建集群
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    准备节点
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    节点握手
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    分配槽
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    节点通信
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gossip" class="md-nav__link">
    Gossip消息
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    节点选择
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    消息数据量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    故障转移
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    主观下线
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    客观下线
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    资格审查
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    准备选举时间
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    发起选举
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    选举投票
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    替换主节点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    资料
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      <!-- 
      
       -->
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    简介
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    特点
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    使用场景
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    数据结构与编码
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    实用功能
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    慢查询分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitmaps" class="md-nav__link">
    Bitmaps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hyperloglog" class="md-nav__link">
    HyperLoglog
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    发布订阅
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ceo" class="md-nav__link">
    CEO
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    持久化
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rdb" class="md-nav__link">
    RDB
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    触发机制
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aof" class="md-nav__link">
    AOF
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#append" class="md-nav__link">
    命令写入(append)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sync" class="md-nav__link">
    文件同步(sync)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rewrite" class="md-nav__link">
    文件重写(rewrite)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load" class="md-nav__link">
    重启加载(load)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    复制
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    拓扑结构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    数据同步
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    心跳机制
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sentinel" class="md-nav__link">
    哨兵(Sentinel)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    基本概念
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    实现原理
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    三个定时任务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    主观下线与客观下线
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    哨兵主节点选举
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    集群
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    数据分布
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    数据分区理论
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    redis数据分区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    功能限制
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    搭建集群
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    准备节点
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    节点握手
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    分配槽
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    节点通信
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gossip" class="md-nav__link">
    Gossip消息
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    节点选择
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    消息数据量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    故障转移
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    主观下线
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    客观下线
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    资格审查
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    准备选举时间
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    发起选举
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    选举投票
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    替换主节点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    资料
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      <!-- 
      
       -->
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="redis-cheatsheet">Redis CheatSheet<a class="headerlink" href="#redis-cheatsheet" title="Permanent link">&para;</a></h1>
<h2 id="_1">简介<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>清单来自<a href="https://yuedu.163.com/source/e99b02fd21a44345bee98821e64b2af6_4">《Redis开发与运维》</a></p>
<h3 id="_2">特点<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<ul>
<li>快；</li>
<li>KV存储；</li>
<li>功能丰富：键过期，发布订阅，Lua，事务，PipeLine</li>
<li>单线程</li>
<li>持久化</li>
<li>主从复制</li>
<li>高可用  (Sentinel)</li>
<li>分布式（Cluster, version &gt; 3.0）</li>
</ul>
<h3 id="_3">使用场景<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>可以做：
* 缓存
* 计数
* 共享session
* 限速
* 标签（集合）
* 排行榜（有序集合）</p>
<p>由于放在内存中，数据量不能太大</p>
<h2 id="api">API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></div></td><td class="code"><div class="highlight"><pre><span></span>// 全局命令
keys *
dbsize
exists key
del key
expire key seconds
type key
object encoding key
select dbInx

// 字符串
strlen key

// 哈希
hset key field value
hget key field

// 列表
rpush key value
linsert key before|after pivot value
lrange key start_inx end_inx
blpop

// 集合
sadd key e1 e2 ...
srem key e1 //删除操作
sinter key1 key2 ... // 多个集合相交

// 有序集合
zadd key score member [score member...]

// pipeline
mset

// 事务
multi
...
exec

// 脚本管理
script load
script flush
script kill

// Bitmaps
setbit key offset value
getbit key offset

// HyperLoglog
pfadd key e1 [e2 ...]
pfcount key1 [key2 ...]

// 发布订阅
publish channel message
subscribe channel [channel2 ...]

// CEO
geoadd key longitude latitude member
geopos key member // 获取member的经纬度

// 统计与排查问题
slowlog get {n} // 获取最近n条慢查询
redis-cli -h {ip} -p {port} bigkeys // 获取大对象 
redis-cli -h {ip} -p {port} --stat // 统计redis使用情况
</pre></div>
</td></tr></table>
<h3 id="_4">数据结构与编码<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>字符串:</p>
</li>
<li>
<p>int 8字节</p>
</li>
<li>embstr  &lt; 39字节</li>
<li>
<p>raw </p>
</li>
<li>
<p>哈希：</p>
</li>
<li>
<p>ziplist 元素个数 &lt; 512,  所有值 &lt; 64字节，元素连续存储，省空间</p>
</li>
<li>
<p>hashtable</p>
</li>
<li>
<p>列表：</p>
</li>
<li>
<p>ziplist entry个数&lt;512个, 所有value &lt; 64字节</p>
</li>
<li>
<p>linkedlist</p>
</li>
<li>
<p>集合：</p>
</li>
<li>
<p>intset 整数集合，元素个数&lt;512</p>
</li>
<li>
<p>hashtable</p>
</li>
<li>
<p>有序集合</p>
</li>
<li>
<p>ziplist 元素个数&lt;128个, 所有value&lt;64字节</p>
</li>
<li>skiplist</li>
</ol>
<h2 id="_5">实用功能<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<h3 id="_6">慢查询分析<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>slowlog-log-slower-than 单位是微秒， 10 毫秒
slowlog-max-len 慢查询条数上限， 1000以上</p>
<h3 id="bitmaps">Bitmaps<a class="headerlink" href="#bitmaps" title="Permanent link">&para;</a></h3>
<p>一亿用户，当日是否访问过网站</p>
<h3 id="hyperloglog">HyperLoglog<a class="headerlink" href="#hyperloglog" title="Permanent link">&para;</a></h3>
<p>有可能有误差</p>
<h3 id="_7">发布订阅<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<h3 id="ceo">CEO<a class="headerlink" href="#ceo" title="Permanent link">&para;</a></h3>
<p>地理位置信息范围计算</p>
<h2 id="_8">持久化<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<h3 id="rdb">RDB<a class="headerlink" href="#rdb" title="Permanent link">&para;</a></h3>
<h2 id="_9">触发机制<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<p>save
bgsave</p>
<p>运作流程略。</p>
<p>优点：</p>
<ul>
<li>使用LZF算法压缩，紧凑，适合做备份，每XX小时备份一次，用于灾难恢复</li>
<li>加载速度快于AOF</li>
</ul>
<p>缺点：</p>
<ul>
<li>无法实时持久化/秒级持久化，因为fork属于重量级操作</li>
<li>兼容性问题</li>
</ul>
<h3 id="aof">AOF<a class="headerlink" href="#aof" title="Permanent link">&para;</a></h3>
<p>运作流程：</p>
<h4 id="append">命令写入(append)<a class="headerlink" href="#append" title="Permanent link">&para;</a></h4>
<ul>
<li>写入aof_buf，减小磁盘负载</li>
<li>使文本协议，因为兼容性好，aof一般是追加操作，可读性好，方便直接修改和管理</li>
</ul>
<h4 id="sync">文件同步(sync)<a class="headerlink" href="#sync" title="Permanent link">&para;</a></h4>
<p>同步策略：</p>
<ul>
<li>always 每条命令写入缓冲区，立即fsync。</li>
<li>everysec 命令写入缓冲区后write。单独线程每秒fsync</li>
<li>no 写入aof_buf后调用write, 不对aof_buf进行fsync</li>
</ul>
<p>常用everysec, 用于平衡性能和数据安全性，在磁盘繁忙的时候，定时fsync的线程会造成主线程阻塞，阻塞流程如下：</p>
<ul>
<li>主线程写入AOF缓冲区</li>
<li>AOF线程每秒执行一次fsync</li>
<li>主线程对比上次AOF fsync成功的时间，如果距上次成功时间在2秒内就不阻塞，否则将阻塞直到同步操作完成。（因此everysec最多可能丢失2秒数据）</li>
</ul>
<h4 id="rewrite">文件重写(rewrite)<a class="headerlink" href="#rewrite" title="Permanent link">&para;</a></h4>
<p>手动触发：bgrewriteaof
自动触发：auto-aof-rewrite-min-size,  auto-aof-rewrite-percentage（当前文件体积/上一次重写后体积）</p>
<h4 id="load">重启加载(load)<a class="headerlink" href="#load" title="Permanent link">&para;</a></h4>
<p>开启aof的情况下，优先加载aof</p>
<h2 id="_10">复制<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<h3 id="_11">配置<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>建立复制 slaveof {masterHost}
断开复制 slaveof no one</p>
<h3 id="_12">拓扑结构<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<ul>
<li>一主一从（简单，不安全）</li>
<li>一主多从（可利用多个节点实现读写分离，加重主节点负载，影响稳定性）</li>
<li>树状主从（有效降低主节点负载和需要传送给从节点的数据量）</li>
</ul>
<h3 id="_13">数据同步<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>psync 命令用于同步，分为全量复制和部分复制，可以用info replication来查看复制偏移量以及复制积压缓冲区</p>
<h3 id="_14">心跳机制<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>主从节点建立复制后，维护长连接并彼此发送心跳命令：</p>
<ul>
<li>主节点连接状态为flag=M, 从节点连接状态为flag=S</li>
<li>主节点每隔10秒发送ping，用于判断从节点是否存活</li>
<li>从节点每秒发送replconf ack {offset} 命令上报当前复制偏移量</li>
</ul>
<h2 id="sentinel">哨兵(Sentinel)<a class="headerlink" href="#sentinel" title="Permanent link">&para;</a></h2>
<h3 id="_15">基本概念<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>用于监控节点，故障转移</p>
<p>两种启动方法：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>redis-sentinel XX.conf
redis-server XX.conf --sentinel
</pre></div>
</td></tr></table>
<h3 id="_16">实现原理<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<h4 id="_17">三个定时任务<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<ul>
<li>每隔10秒，每个哨兵节点都向主节点执行info命令，获取最新的拓扑结构</li>
<li>每隔2秒，每隔哨兵节点会向数据节点的__sentinel__:hello频道发送该哨兵节点对主节点的判断，该频道也用于哨兵节点交换主节点的状态，作为客观下线和领导者选举的依据</li>
<li>每隔1秒，每个哨兵节点会向主节点，从节点，哨兵节点发送一条ping命令做一次心跳检测，来确认这些节点是否可达。</li>
</ul>
<h4 id="_18">主观下线与客观下线<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<h4 id="_19">哨兵主节点选举<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h4>
<p>Raft算法简述：</p>
<ol>
<li>每个哨兵节点都想成为领导者，会向其它哨兵节点发送sentinel is-master-down-by-addr 命令，要求将自己设置为领导者</li>
<li>每个收到sentinel is-master-down-by-addr命令的哨兵节点，如果没有收到过其它节点的sentinel is-master-down-by-addr命令，将同意其成为领导者，否则拒绝</li>
<li>如果该哨兵节点发现字节的票数大于max(quorum, num(sentinel)/2+1)， 那么它将成为领导者</li>
<li>如果此过程没有选举出领导者，将进入下一次选举。</li>
</ol>
<h2 id="_20">集群<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h2>
<h3 id="_21">数据分布<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<h4 id="_22">数据分区理论<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h4>
<ol>
<li>节点取余</li>
<li>一致性哈希分区(常用于缓存场景)</li>
<li>虚拟槽分区</li>
</ol>
<h4 id="redis">redis数据分区<a class="headerlink" href="#redis" title="Permanent link">&para;</a></h4>
<p>slot = CRC16(key) &amp; 16383</p>
<h4 id="_23">功能限制<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h4>
<ol>
<li>批量操作如mset，mget只支持具有相同slot值的key执行操作</li>
<li>只支持多key在同一节点上的事务操作</li>
<li>key作为数据分区的最小粒度，因此不能将一个大的键值对象如hash，list映射到不同的节点</li>
<li>不支持多数据库空间。单机最多可使用16个数据库，集群模式只能使用一个数据库空间，即db 0</li>
<li>复制结构只支持一层，不支持嵌套树状复制结构</li>
</ol>
<h3 id="_24">搭建集群<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<h3 id="_25">准备节点<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h3>
<p>配置：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span>port 6379
# 开启集群模式
cluster-enabled yes
# 节点超时时间，单位毫秒
cluster-node-timeout 15000
# 集群内部配置文件
cluster-config-file &quot;nodes-6379.conf&quot;
</pre></div>
</td></tr></table>
<p>启动节点：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>redis-server conf/redis-6379.conf
</pre></div>
</td></tr></table>
<h3 id="_26">节点握手<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>cluster meet 127.0.0.1 6381
cluster nodes
cluster info
</pre></div>
</td></tr></table>
<h3 id="_27">分配槽<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>redis-cli -h 127.0.0.1 -p 6379 cluster addslots {0...5461}
cluster replicate {node run id}
</pre></div>
</td></tr></table>
<h3 id="_28">节点通信<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<h4 id="gossip">Gossip消息<a class="headerlink" href="#gossip" title="Permanent link">&para;</a></h4>
<ul>
<li>ping</li>
<li>pong</li>
<li>meet</li>
<li>fail</li>
</ul>
<p>消息头：clusterMsg ; 消息体：clusterMsgData</p>
<h4 id="_29">节点选择<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h4>
<blockquote>
<p>每秒随机选取5个节点，向其中最久没有通信的节点发送ping消息。每100毫秒扫描本地节点列表，向最近一次接收pong消息的时间大于cluster_node_timeout/2的节点发送ping消息。</p>
</blockquote>
<p>注意: cluster_node_timeout参数对消息发送的节点数影响非常大。该参数会影响消息交换的频率从而影响故障转移，槽信息更新，新节点发现速度。因此需要根据业务容忍程度和资源消耗进行平衡。</p>
<h4 id="_30">消息数据量<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h4>
<blockquote>
<p>消息头主要占用空间的字段是myslots[cluster_slots/8]，占用2KB;
消息体会携带一定数量的其它节点信息用于消息交换，
消息体中其它节点的数量=max(3, floor(cluster_node_size/10))。</p>
</blockquote>
<h4 id="_31">故障转移<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h4>
<h5 id="_32">主观下线<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h5>
<p>每个节点定期向其它节点发送ping消息，若在cluster_node_timeout之内没收到pong消息，则把该节点标记为主观下线状态。</p>
<p>每个节点内的clusterState结构都需要保存其它节点的信息。</p>
<h5 id="_33">客观下线<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h5>
<p>当某个节点判断另一个节点主观下线后，相应的节点状态信息会在对集群内传播。ping/pong消息体会携带集群1/10的其它节点状态信息，当接受节点发现消息体中含有主观下线的节点时，会在本地找到故障节点的ClusterNode结构，保存到该结构中下线报告链表中。<br/></p>
<p>当半数以上持有槽点主节点都标记某个节点是主观下线时，触发客观下线流程。要求半数以上是为了应对网络分区等原因造成的集群分隔情况，被分割的小集群因为无法完成从主观下线到客观下线这一过程，从而防止小集群完成故障转移后继续对外提供服务。</p>
<h5 id="_34">资格审查<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h5>
<p>如果下线节点是持有槽的主节点则需要在它的从节点中挑选出一个替换它。<br/>
检查最后与主节点断线时间，判断是否有资格成为替换故障的主节点。<br/>
如果从节点与主节点断线时间超过cluster-node-time * cluser-slave-validity-factor，则当前从节点不具备故障转移资格。</p>
<h4 id="_35">准备选举时间<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<p>当前从节点具备资格后，更新触发故障选举的时间，只有到达改时间后才能执行后续流程。(延迟触发机制，可以通过对多个从节点使用不同的延迟选举时间来支持优先级问题。复制偏移量越大优先级越高，延迟时间越小。)</p>
<h4 id="_36">发起选举<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h4>
<p>通过配置纪元（configEpoch）来保证每个从节点在一个配置纪元内只能发起一次选举消息。该选举消息消息内容如同ping消息，只是type类型为FAILOVER_AUTH_REQUEST。同时标记该节点在该配置纪元内已发送过消息状态。</p>
<h4 id="_37">选举投票<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h4>
<p>持有槽点主节点在一个配置纪元内只有唯一的一张选票, 当接到第一个请求投票的从节点消息时回复FAILOVER_AUTH_REQUEST消息作为投票，之后相同纪元内其它从节点的选举消息将忽略。</p>
<h4 id="_38">替换主节点<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h4>
<ol>
<li>当前从节点取消复制变为</li>
<li>撤销故障节点复制的槽，并将这些槽委派给自己</li>
<li>向集群内广播pong消息, 通知其它节点自己已成为主节点</li>
</ol>
<h3 id="_39">资料<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h3>
<p><a href="http://www.infoq.com/cn/articles/raft-paper">Raft算法</a><br/>
<a href="http://carlosfu.iteye.com">作者 付磊博客</a> <br/>
<a href="http://hot66hot.iteye.com">作者 张益军博客</a></p>
                
                  
                
              
              <!-- 
                 
 
 
<hr><blockquote class="page-copyright">
  <span><i class="md-icon">build</i>本页面最近更新：</span><span class="facts_modified"></span>，<a class="edit_history">更新历史</a><br>
  <span><i class="md-icon">edit</i>发现错误？想一起完善？ <a href="None" title="编辑此页" class="page_edit_url">在 GitHub 上编辑此页！</a></span><br>
  <span><i class="md-icon">people</i>本页面贡献者：</span><span class="page_contributors">OI-wiki</span><br>
  <span><i class="md-icon">copyright</i>本页面的全部内容在 <strong></strong> 协议之条款下提供，附加条款亦可能应用</span>
</blockquote>

               -->
            </article>
          </div>
        </div>
      </main>
      
        
<script>function scrollFunction(){20<document.body.scrollTop||20<document.documentElement.scrollTop?document.getElementById("myBtn").style.display="block":document.getElementById("myBtn").style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}window.onscroll=function(){scrollFunction()}</script>
<button onclick="topFunction()" id="myBtn" class="data-tip-left" data-tip="回到顶部">
  <svg class="Zi Zi--BackToTop data-tip-left" data-tip="回到顶部" fill="currentColor" viewBox="0 0 24 24" width="24" height="24">
    <path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"></path>
  </svg>
</button>
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../java.util.concurrent.locks%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/" title="java.util.concurrent.locks源码剖析" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  上一页
                </span>
                java.util.concurrent.locks源码剖析
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
        <div id="miitbeian"></div>
      </div>
      
      <span style="float:right" class="build_date_utc"><a href="https://github.com/24OI/OI-wiki">最近更新：, 2021-09-29</a></span>
      <script>
        /* miitbeian */
        if (window.location.hostname == "oi-wiki.com") {
          document.getElementById("miitbeian").innerHTML = `<a href="http://beian.miit.gov.cn/">黑ICP备19005132号-2</a>`;
        }
        /* Easter Egg */
        console.log(`%c OI Wiki %c  %c`,"background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#41b883 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent");
        console.log('少年，恭喜你囍提彩蛋，我们在做一些 OI 相关的有趣的事情，如果您对此感兴趣，欢迎访问 https://join-us.oi-wiki.org');
      </script>
      
    </div>
    <div class="sponsor" style="text-align:center;color:#fff;vertical-align:middle">
      Supported by <span>
      <a href="/intro/hulu/">
        <img src="https://cdn.jsdelivr.net/npm/oicdn@0.0.1/hulu-white.png" style="vertical-align:-12px;width:125px;margin-left:5px">
      </a>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.ad30b88d.js"></script>
      <script>app.initialize({version:"1.2.2",url:{base:"../.."}}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).then(function(e){console.log("PWA Registration succeeded. Scope is "+e.scope)}).catch(function(e){console.log("PWA Registration failed with "+e)})</script>
      
    
  </body>
</html>